# äº¤æ˜“æ‰€å…¬é’¥è®¿é—®é…ç½®æŒ‡å—

## æ¦‚è¿°

æ‰€æœ‰äº¤æ˜“æ‰€çš„ä»·æ ¼ä¿¡æ¯éƒ½å¯ä»¥ä½¿ç”¨å…¬é’¥è®¿é—®ï¼Œæ— éœ€APIå¯†é’¥ã€‚æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•é…ç½®å’Œè§£å†³å¸¸è§é—®é¢˜ã€‚

## æ”¯æŒçš„äº¤æ˜“æ‰€

### âœ… å®Œå…¨æ”¯æŒå…¬é’¥è®¿é—®

1. **Binance (å¸å®‰)**
   - ä»·æ ¼API: `https://api.binance.com/api/v3/ticker/price`
   - Kçº¿API: `https://api.binance.com/api/v3/klines`
   - 24hè¡Œæƒ…: `https://api.binance.com/api/v3/ticker/24hr`
   - çŠ¶æ€: âœ… æ­£å¸¸å·¥ä½œ

2. **Gate.io**
   - ä»·æ ¼API: `https://api.gateio.ws/api/v4/spot/tickers`
   - Kçº¿API: `https://api.gateio.ws/api/v4/spot/candlesticks`
   - 24hè¡Œæƒ…: `https://api.gateio.ws/api/v4/spot/tickers`
   - çŠ¶æ€: âœ… æ­£å¸¸å·¥ä½œ

3. **OKX**
   - ä»·æ ¼API: `https://www.okx.com/api/v5/market/ticker`
   - Kçº¿API: `https://www.okx.com/api/v5/market/candles`
   - 24hè¡Œæƒ…: `https://www.okx.com/api/v5/market/ticker`
   - çŠ¶æ€: âš ï¸ å¯èƒ½å­˜åœ¨ç½‘ç»œé—®é¢˜

4. **Bitget**
   - ä»·æ ¼API: `https://api.bitget.com/api/spot/v1/market/ticker`
   - Kçº¿API: `https://api.bitget.com/api/spot/v1/market/candles`
   - 24hè¡Œæƒ…: `https://api.bitget.com/api/spot/v1/market/ticker`
   - çŠ¶æ€: âš ï¸ å¯èƒ½å­˜åœ¨ç½‘ç»œé—®é¢˜

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®

å³ä½¿æ²¡æœ‰APIå¯†é’¥ï¼Œç³»ç»Ÿä¹Ÿä¼šè‡ªåŠ¨é…ç½®äº¤æ˜“æ‰€æ”¯æŒå…¬é’¥è®¿é—®ï¼š

```bash
# å¯é€‰ï¼šå¦‚æœæœ‰APIå¯†é’¥ï¼Œå¯ä»¥æ·»åŠ ä»¥ä¸‹é…ç½®
BINANCE_API_KEY=your_binance_api_key
BINANCE_API_SECRET=your_binance_secret_key

OKX_API_KEY=your_okx_api_key
OKX_SECRET_KEY=your_okx_secret_key
OKX_PASSPHRASE=your_okx_passphrase

BITGET_API_KEY=your_bitget_api_key
BITGET_SECRET_KEY=your_bitget_secret_key
BITGET_PASSPHRASE=your_bitget_passphrase

GATE_API_KEY=your_gate_api_key
GATE_SECRET_KEY=your_gate_secret_key
```

### è‡ªåŠ¨é…ç½®

ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹APIå¯†é’¥ï¼š
- å¦‚æœæœ‰APIå¯†é’¥ï¼šå¯ç”¨å®Œæ•´åŠŸèƒ½ï¼ˆä»·æ ¼æŸ¥è¯¢ + äº¤æ˜“ï¼‰
- å¦‚æœæ²¡æœ‰APIå¯†é’¥ï¼šä»…å¯ç”¨ä»·æ ¼æŸ¥è¯¢åŠŸèƒ½

## ç½‘ç»œé—®é¢˜è§£å†³æ–¹æ¡ˆ

### 1. é˜²ç«å¢™é—®é¢˜

å¦‚æœé‡åˆ° `fetch failed` é”™è¯¯ï¼Œå¯èƒ½æ˜¯é˜²ç«å¢™é˜»æ­¢äº†æŸäº›äº¤æ˜“æ‰€çš„APIï¼š

**è§£å†³æ–¹æ¡ˆï¼š**
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- æ·»åŠ ä¾‹å¤–è§„åˆ™
- ä½¿ç”¨VPNæˆ–ä»£ç†

### 2. DNSè§£æé—®é¢˜

æŸäº›äº¤æ˜“æ‰€çš„åŸŸåå¯èƒ½è¢«DNSæ±¡æŸ“ï¼š

**è§£å†³æ–¹æ¡ˆï¼š**
- ä½¿ç”¨å…¬å…±DNSï¼ˆå¦‚8.8.8.8, 1.1.1.1ï¼‰
- ä¿®æ”¹hostsæ–‡ä»¶
- ä½¿ç”¨ä»£ç†æœåŠ¡å™¨

### 3. ç½‘ç»œä»£ç†é…ç½®

å¦‚æœéœ€è¦ä½¿ç”¨ä»£ç†ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­é…ç½®ï¼š

```javascript
// åœ¨fetchè¯·æ±‚ä¸­æ·»åŠ ä»£ç†é…ç½®
const response = await fetch(url, {
  method: 'GET',
  headers: {
    'Content-Type': 'application/json'
  },
  // å¦‚æœéœ€è¦ä»£ç†ï¼Œå¯ä»¥åœ¨è¿™é‡Œé…ç½®
  // agent: new HttpsProxyAgent('http://proxy-server:port')
});
```

## æµ‹è¯•æ–¹æ³•

### 1. ç®€å•æµ‹è¯•

è¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯è¿æ¥ï¼š

```bash
node test-simple-api.js
```

### 2. å®Œæ•´æµ‹è¯•

è¿è¡Œå®Œæ•´çš„åŠŸèƒ½æµ‹è¯•ï¼š

```bash
node test-public-api.js
```

### 3. æ‰‹åŠ¨æµ‹è¯•

ä½¿ç”¨curlå‘½ä»¤æµ‹è¯•ï¼š

```bash
# æµ‹è¯•Binance
curl "https://api.binance.com/api/v3/ticker/price?symbol=BTCUSDT"

# æµ‹è¯•Gate.io
curl "https://api.gateio.ws/api/v4/spot/tickers?currency_pair=BTC_USDT"

# æµ‹è¯•OKX
curl "https://www.okx.com/api/v5/market/ticker?instId=BTC-USDT"

# æµ‹è¯•Bitget
curl "https://api.bitget.com/api/spot/v1/market/ticker?symbol=BTCUSDT"
```

## é”™è¯¯å¤„ç†

### å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

1. **fetch failed**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
   - å°è¯•ä½¿ç”¨ä»£ç†

2. **HTTP 403/429**
   - è¯·æ±‚é¢‘ç‡è¿‡é«˜ï¼Œç­‰å¾…åé‡è¯•
   - æ£€æŸ¥User-Agentè®¾ç½®

3. **DNSè§£æå¤±è´¥**
   - æ›´æ¢DNSæœåŠ¡å™¨
   - æ£€æŸ¥hostsæ–‡ä»¶

4. **SSLè¯ä¹¦é”™è¯¯**
   - æ›´æ–°Node.jsç‰ˆæœ¬
   - æ£€æŸ¥ç³»ç»Ÿæ—¶é—´è®¾ç½®

## æ€§èƒ½ä¼˜åŒ–

### 1. é‡è¯•æœºåˆ¶

æ‰€æœ‰äº¤æ˜“æ‰€é€‚é…å™¨éƒ½åŒ…å«é‡è¯•æœºåˆ¶ï¼š
- æœ€å¤§é‡è¯•æ¬¡æ•°ï¼š3æ¬¡
- é€’å¢å»¶è¿Ÿï¼š1ç§’ã€2ç§’ã€5ç§’
- è¶…æ—¶è®¾ç½®ï¼š15ç§’

### 2. ç¼“å­˜æœºåˆ¶

ä»·æ ¼æ•°æ®ä¼šè¢«ç¼“å­˜ä»¥æé«˜æ€§èƒ½ï¼š
- Redisç¼“å­˜ï¼š5åˆ†é’Ÿ
- å†…å­˜ç¼“å­˜ï¼š1åˆ†é’Ÿ

### 3. å¹¶å‘æ§åˆ¶

é¿å…åŒæ—¶å‘é€è¿‡å¤šè¯·æ±‚ï¼š
- é™åˆ¶å¹¶å‘è¯·æ±‚æ•°
- æ·»åŠ è¯·æ±‚é—´éš”

## ç›‘æ§å’Œæ—¥å¿—

### è°ƒè¯•æ—¥å¿—

å¯ç”¨è°ƒè¯•æ¨¡å¼æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š

```javascript
// åœ¨ä»£ç ä¸­æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯
console.log('ğŸ” äº¤æ˜“æ‰€è°ƒè¯•ä¿¡æ¯');
```

### å¥åº·æ£€æŸ¥

å®šæœŸæ£€æŸ¥äº¤æ˜“æ‰€è¿æ¥çŠ¶æ€ï¼š

```javascript
// æ£€æŸ¥äº¤æ˜“æ‰€å¥åº·çŠ¶æ€
const status = await exchangeManager.checkHealth();
```

## æ€»ç»“

âœ… **æ‰€æœ‰äº¤æ˜“æ‰€éƒ½æ”¯æŒå…¬é’¥è®¿é—®ä»·æ ¼ä¿¡æ¯**
âœ… **æ— éœ€APIå¯†é’¥å³å¯è·å–å¸‚åœºæ•°æ®**
âœ… **ç³»ç»Ÿè‡ªåŠ¨é…ç½®ï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½®**
âš ï¸ **æŸäº›äº¤æ˜“æ‰€å¯èƒ½å­˜åœ¨ç½‘ç»œè®¿é—®é—®é¢˜**
ğŸ”§ **æä¾›å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶**

é€šè¿‡ä»¥ä¸Šé…ç½®ï¼Œæ‚¨å¯ä»¥å……åˆ†åˆ©ç”¨æ‰€æœ‰äº¤æ˜“æ‰€çš„å…¬å¼€APIåŠŸèƒ½ï¼Œæ— éœ€æ‹…å¿ƒAPIå¯†é’¥ç®¡ç†é—®é¢˜ã€‚ 